<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø´Ø¨ÙŠÙ‡Ø© Strikingly</title>
	<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<style>
		body { background: #f7f7fa; font-family: 'Cairo', Arial, sans-serif; margin: 0; }
		.dashboard-wrapper { display: flex; min-height: 100vh; }
		.sidebar {
			width: 220px;
			background: #fff;
			box-shadow: 2px 0 16px #0001;
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 32px 0 0 0;
		}
		.sidebar-logo {
			font-size: 2.2em;
			font-weight: bold;
			color: #FFD600;
			margin-bottom: 32px;
		}
		.sidebar nav ul { list-style: none; padding: 0; margin: 0; width: 100%; }
		.sidebar-link {
			width: 100%;
			padding: 14px 28px 14px 18px;
			color: #333;
			font-size: 1.1em;
			display: flex;
			align-items: center;
			gap: 12px;
			cursor: pointer;
			border-right: 4px solid transparent;
			transition: background 0.2s, border-color 0.2s, color 0.2s;
		}
		.sidebar-link.active, .sidebar-link:hover {
			background: #FFD60022;
			color: #FFD600;
			border-right: 4px solid #FFD600;
		}
		.main-content {
			flex: 1;
			padding: 48px 40px 32px 40px;
			background: #f7f7fa;
			min-height: 100vh;
		}
		.dashboard-section { background: #fff; border-radius: 18px; box-shadow: 0 2px 12px #0001; padding: 32px 24px; margin-bottom: 32px; }
		h2 { color: #18120b; margin-top: 0; }
		.section-title { color: #FFD600; font-size: 1.2em; margin-top: 32px; margin-bottom: 8px; border-bottom: 1.5px solid #FFD60055; padding-bottom: 4px; }
		.note { color: #FFA726; font-size: 0.95em; margin-bottom: 18px; }
	</style>
</head>
<body>
	<div class="dashboard-wrapper">
		<aside class="sidebar">
			<div class="sidebar-logo">ğŸŒ</div>
			<nav>
				<ul>
					<li class="sidebar-link active" data-section="dashboard"><i class="fa fa-chart-bar"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</li>
					<li class="sidebar-link" data-section="users"><i class="fa fa-users"></i> Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</li>
					<li class="sidebar-link" data-section="content"><i class="fa fa-file-alt"></i> Ø§Ù„Ù…Ø­ØªÙˆÙ‰</li>
					<li class="sidebar-link" data-section="partners"><i class="fa fa-handshake"></i> Ø§Ù„Ø´Ø±ÙƒØ§Ø¡</li>
					<li class="sidebar-link" data-section="stories"><i class="fa fa-star"></i> Ù‚ØµØµ Ø§Ù„Ù†Ø¬Ø§Ø­</li>
					<li class="sidebar-link" data-section="settings"><i class="fa fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</li>
					<li class="sidebar-link" data-section="logout"><i class="fa fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬</li>
				</ul>
			</nav>
		</aside>
		<main class="main-content">
			<div id="section-dashboard" class="dashboard-section"> 
				<h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
				<div id="analyticsDashboard"></div>
			</div>
			<div id="section-users" class="dashboard-section" style="display:none;">
				<h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
				<div id="userRolesManager"></div>
				<div style="margin-top:18px;">
					<input id="newUserName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" style="width:120px;">
					<input id="newUserPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" type="password" style="width:120px;">
					<select id="newUserRole" style="width:100px;">
						<option value="admin">Ù…Ø¯ÙŠØ±</option>
						<option value="editor">Ù…Ø­Ø±Ø±</option>
						<option value="viewer">Ù…Ø´Ø§Ù‡Ø¯</option>
					</select>
					<button id="addUserBtn" style="background:#FFD600;color:#18120b;padding:6px 18px;border:none;border-radius:8px;font-weight:bold;">Ø¥Ø¶Ø§ÙØ©</button>
					<span id="userAddedMsg" style="margin-right:18px;color:#43a047;display:none;">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!</span>
				</div>
			</div>
			<div id="section-content" class="dashboard-section" style="display:none;">
				<h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰</h2>
				<div id="aboutManager"></div>
				<div id="privacyManager"></div>
				<div id="faqManager"></div>
			</div>
			<div id="section-blog" class="dashboard-section" style="display:none;">
				<h2>Ø§Ù„Ù…Ø¯ÙˆÙ†Ø§Øª</h2>
				<div id="blogManager"></div>
				<div style="margin-top:18px;">
					<input id="newBlogTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØ¯ÙˆÙŠÙ†Ø©" style="width:160px;">
					<input id="newBlogBody" placeholder="Ø§Ù„Ù…Ø­ØªÙˆÙ‰" style="width:220px;">
					<button id="addBlogBtn" style="background:#FFD600;color:#18120b;padding:6px 18px;border:none;border-radius:8px;font-weight:bold;">Ø¥Ø¶Ø§ÙØ©</button>
					<span id="blogAddedMsg" style="margin-right:18px;color:#43a047;display:none;">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!</span>
				</div>
			</div>
			<div id="section-plans" class="dashboard-section" style="display:none;">
				<h2>Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</h2>
				<div id="plansManager"></div>
				<div style="margin-top:18px;">
					<input id="newPlanName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©" style="width:120px;">
					<input id="newPlanPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±" style="width:80px;">
					<button id="addPlanBtn" style="background:#FFD600;color:#18120b;padding:6px 18px;border:none;border-radius:8px;font-weight:bold;">Ø¥Ø¶Ø§ÙØ©</button>
					<span id="planAddedMsg" style="margin-right:18px;color:#43a047;display:none;">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!</span>
				</div>
			</div>
			<div id="section-devices" class="dashboard-section" style="display:none;">
				<h2>Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</h2>
				<div id="devicesManager"></div>
				<div style="margin-top:18px;">
					<input id="newDeviceName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²" style="width:120px;">
					<input id="newDeviceType" placeholder="Ø§Ù„Ù†ÙˆØ¹" style="width:100px;">
					<button id="addDeviceBtn" style="background:#FFD600;color:#18120b;padding:6px 18px;border:none;border-radius:8px;font-weight:bold;">Ø¥Ø¶Ø§ÙØ©</button>
					<span id="deviceAddedMsg" style="margin-right:18px;color:#43a047;display:none;">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!</span>
				</div>
			</div>
			<div id="section-news" class="dashboard-section" style="display:none;">
				<h2>Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
				<div id="newsManager"></div>
				<div style="margin-top:18px;">
					<input id="newNewsTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±" style="width:160px;">
					<input id="newNewsBody" placeholder="Ø§Ù„Ù…Ø­ØªÙˆÙ‰" style="width:220px;">
					<button id="addNewsBtn" style="background:#FFD600;color:#18120b;padding:6px 18px;border:none;border-radius:8px;font-weight:bold;">Ø¥Ø¶Ø§ÙØ©</button>
					<span id="newsAddedMsg" style="margin-right:18px;color:#43a047;display:none;">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!</span>
				</div>
			</div>
			<div id="section-contact" class="dashboard-section" style="display:none;">
				<h2>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
				<div id="contactManager"></div>
			</div>
			<div id="section-partners" class="dashboard-section" style="display:none;">
				<h2>Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ø®ÙŠØ±</h2>
				<div id="partnersManager"></div>
				<div style="margin-top:18px;">
					<input id="newPartnerName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙŠÙƒ" style="width:140px;">
					<input id="newPartnerLink" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹/ØµÙØ­Ø©" style="width:180px;">
					<button id="addPartnerBtn" style="background:#FFD600;color:#18120b;padding:6px 18px;border:none;border-radius:8px;font-weight:bold;">Ø¥Ø¶Ø§ÙØ©</button>
					<span id="partnerAddedMsg" style="margin-right:18px;color:#43a047;display:none;">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!</span>
				</div>
			</div>
			<div id="section-stories" class="dashboard-section" style="display:none;">
				<h2>Ù‚ØµØµ Ø§Ù„Ù†Ø¬Ø§Ø­</h2>
				<div id="storiesManager"></div>
			</div>
			<div id="section-settings" class="dashboard-section" style="display:none;">
				<h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h2>
				<div id="accessibilityManager"></div>
				<div id="donateManager"></div>
				<div id="langManager"></div>
			</div>
		</main>
	</div>
	<script>
		// --- Ø±Ø¨Ø· Ù‚Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¹ API (Redis) ---
		async function fetchUsers() {
			const res = await fetch('/api/users');
			if (!res.ok) return [];
			return await res.json();
		}
		async function updateUsers(newUsers) {
			const res = await fetch('/api/users', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(newUsers)
			});
			return await res.json();
		}
		async function renderUsersSection() {
			const users = await fetchUsers();
			const container = document.getElementById('userRolesManager');
			container.innerHTML = `<table style="width:100%;border-collapse:collapse;">
				<tr style="background:#f7f7fa;"><th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ø¯ÙˆØ±</th></tr>
				${users.map(u=>`<tr><td>${u.username}</td><td>${u.role}</td></tr>`).join('')}
			</table>`;
		}
		async function addUser() {
			const username = document.getElementById('newUserName').value.trim();
			const password = document.getElementById('newUserPass').value.trim();
			const role = document.getElementById('newUserRole').value;
			if(!username||!password) return;
			let users = await fetchUsers();
			users.push({ username, password, role });
			await updateUsers(users);
			document.getElementById('userAddedMsg').style.display = 'inline';
			setTimeout(()=>document.getElementById('userAddedMsg').style.display='none', 2000);
			document.getElementById('newUserName').value = '';
			document.getElementById('newUserPass').value = '';
			renderUsersSection();
		}
		document.querySelector('[data-section="users"]').addEventListener('click', renderUsersSection);
		document.getElementById('addUserBtn').onclick = addUser;
		if(document.getElementById('section-users').style.display==='block') renderUsersSection();

		// --- Ø±Ø¨Ø· Ù‚Ø³Ù… Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¹ API (Redis) ---
		async function fetchContent() {
			const res = await fetch('/api/content');
			if (!res.ok) return { welcome: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', info: '' };
			return await res.json();
		}
		async function updateContent(newContent) {
			const res = await fetch('/api/content', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(newContent)
			});
			return await res.json();
		}
		async function renderContentSection() {
			const content = await fetchContent();
			const container = document.getElementById('aboutManager');
			container.innerHTML = `
				<div style="margin-bottom:12px;">Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨: <input id="welcomeInput" value="${content.welcome||''}" style="width:60%"></div>
				<div style="margin-bottom:12px;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©: <input id="infoInput" value="${content.info||''}" style="width:60%"></div>
				<button id="saveContentBtn" style="background:#FFD600;color:#18120b;padding:8px 24px;border:none;border-radius:8px;font-weight:bold;">Ø­ÙØ¸</button>
				<span id="contentSavedMsg" style="margin-right:18px;color:#43a047;display:none;">ØªÙ… Ø§Ù„Ø­ÙØ¸!</span>
			`;
			document.getElementById('saveContentBtn').onclick = async function() {
				const newContent = {
					welcome: document.getElementById('welcomeInput').value,
					info: document.getElementById('infoInput').value
				};
				await updateContent(newContent);
				document.getElementById('contentSavedMsg').style.display = 'inline';
				setTimeout(()=>document.getElementById('contentSavedMsg').style.display='none', 2000);
			};
		}
		document.querySelector('[data-section="content"]').addEventListener('click', renderContentSection);
		if(document.getElementById('section-content').style.display==='block') renderContentSection();

		// --- Ø±Ø¨Ø· Ø§Ù„Ù…Ø¯ÙˆÙ†Ø§Øª ---
		async function fetchBlog() {
			const res = await fetch('/api/content');
			if (!res.ok) return [];
			const data = await res.json();
			return data.blog || [];
		}
		async function updateBlog(newBlog) {
			const res = await fetch('/api/content');
			let content = res.ok ? await res.json() : {};
			content.blog = newBlog;
			await fetch('/api/content', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(content)
			});
		}
		async function renderBlogSection() {
			const blog = await fetchBlog();
			const container = document.getElementById('blogManager');
			var blogHtml = '<table style="width:100%;border-collapse:collapse;">';
			blogHtml += '<tr style="background:#f7f7fa;"><th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th><th>Ø§Ù„Ù…Ø­ØªÙˆÙ‰</th><th>ØªØ¹Ø¯ÙŠÙ„</th></tr>';
			for(var i=0;i<blog.length;i++) {
				blogHtml += '<tr>';
				blogHtml += '<td><input value="'+(blog[i].title||'')+'" id="btitle'+i+'" style="width:120px"></td>';
				blogHtml += '<td><input value="'+(blog[i].body||'')+'" id="bbody'+i+'" style="width:180px"></td>';
				blogHtml += '<td><button onclick="saveBlog('+i+')" style="background:#43a047;color:#fff;border:none;padding:4px 12px;border-radius:6px;">Ø­ÙØ¸</button></td>';
				blogHtml += '</tr>';
			}
			blogHtml += '</table>';
			container.innerHTML = blogHtml;
		}
		window.saveBlog = async function(idx) {
			let blog = await fetchBlog();
			blog[idx].title = document.getElementById('btitle'+idx).value;
			blog[idx].body = document.getElementById('bbody'+idx).value;
			await updateBlog(blog);
			renderBlogSection();
		}
		async function addBlog() {
			const title = document.getElementById('newBlogTitle').value.trim();
			const body = document.getElementById('newBlogBody').value.trim();
			if(!title||!body) return;
			let blog = await fetchBlog();
			blog.push({ title, body });
			await updateBlog(blog);
			document.getElementById('blogAddedMsg').style.display = 'inline';
			setTimeout(()=>document.getElementById('blogAddedMsg').style.display='none', 2000);
			document.getElementById('newBlogTitle').value = '';
			document.getElementById('newBlogBody').value = '';
			renderBlogSection();
		}
		document.querySelector('[data-section="blog"]').addEventListener('click', renderBlogSection);
		document.getElementById('addBlogBtn').onclick = addBlog;
		if(document.getElementById('section-blog').style.display==='block') renderBlogSection();

		// --- Ø±Ø¨Ø· Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ---
		async function fetchPlans() {
			const res = await fetch('/api/content');
			if (!res.ok) return [];
			const data = await res.json();
			return data.plans || [];
		}
		async function updatePlans(newPlans) {
			const res = await fetch('/api/content');
			let content = res.ok ? await res.json() : {};
			content.plans = newPlans;
			await fetch('/api/content', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(content)
			});
		}
		async function renderPlansSection() {
			const plans = await fetchPlans();
			const container = document.getElementById('plansManager');
			var plansHtml = '<table style="width:100%;border-collapse:collapse;">';
			plansHtml += '<tr style="background:#f7f7fa;"><th>Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>ØªØ¹Ø¯ÙŠÙ„</th></tr>';
			for(var i=0;i<plans.length;i++) {
				plansHtml += '<tr>';
				plansHtml += '<td><input value="'+(plans[i].name||'')+'" id="planname'+i+'" style="width:90px"></td>';
				plansHtml += '<td><input value="'+(plans[i].price||'')+'" id="planprice'+i+'" style="width:60px"></td>';
				plansHtml += '<td><button onclick="savePlan('+i+')" style="background:#43a047;color:#fff;border:none;padding:4px 12px;border-radius:6px;">Ø­ÙØ¸</button></td>';
				plansHtml += '</tr>';
			}
			plansHtml += '</table>';
			container.innerHTML = plansHtml;
		}
		window.savePlan = async function(idx) {
			let plans = await fetchPlans();
			plans[idx].name = document.getElementById('planname'+idx).value;
			plans[idx].price = document.getElementById('planprice'+idx).value;
			await updatePlans(plans);
			renderPlansSection();
		}
		async function addPlan() {
			const name = document.getElementById('newPlanName').value.trim();
			const price = document.getElementById('newPlanPrice').value.trim();
			if(!name||!price) return;
			let plans = await fetchPlans();
			plans.push({ name, price });
			await updatePlans(plans);
			document.getElementById('planAddedMsg').style.display = 'inline';
			setTimeout(()=>document.getElementById('planAddedMsg').style.display='none', 2000);
			document.getElementById('newPlanName').value = '';
			document.getElementById('newPlanPrice').value = '';
			renderPlansSection();
		}
		document.querySelector('[data-section="plans"]').addEventListener('click', renderPlansSection);
		document.getElementById('addPlanBtn').onclick = addPlan;
		if(document.getElementById('section-plans').style.display==='block') renderPlansSection();

		// --- Ø±Ø¨Ø· Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ---
		async function fetchDevices() {
			const res = await fetch('/api/content');
			if (!res.ok) return [];
			const data = await res.json();
			return data.devices || [];
		}
		async function updateDevices(newDevices) {
			const res = await fetch('/api/content');
			let content = res.ok ? await res.json() : {};
			content.devices = newDevices;
			await fetch('/api/content', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(content)
			});
		}
		async function renderDevicesSection() {
			const devices = await fetchDevices();
			const container = document.getElementById('devicesManager');
			var devicesHtml = '<table style="width:100%;border-collapse:collapse;">';
			devicesHtml += '<tr style="background:#f7f7fa;"><th>Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>ØªØ¹Ø¯ÙŠÙ„</th></tr>';
			for(var i=0;i<devices.length;i++) {
				devicesHtml += '<tr>';
				devicesHtml += '<td><input value="'+(devices[i].name||'')+'" id="devicename'+i+'" style="width:90px"></td>';
				devicesHtml += '<td><input value="'+(devices[i].type||'')+'" id="devicetype'+i+'" style="width:80px"></td>';
				devicesHtml += '<td><button onclick="saveDevice('+i+')" style="background:#43a047;color:#fff;border:none;padding:4px 12px;border-radius:6px;">Ø­ÙØ¸</button></td>';
				devicesHtml += '</tr>';
			}
			devicesHtml += '</table>';
			container.innerHTML = devicesHtml;
		}
		window.saveDevice = async function(idx) {
			let devices = await fetchDevices();
			devices[idx].name = document.getElementById('devicename'+idx).value;
			devices[idx].type = document.getElementById('devicetype'+idx).value;
			await updateDevices(devices);
			renderDevicesSection();
		}
		async function addDevice() {
			const name = document.getElementById('newDeviceName').value.trim();
			const type = document.getElementById('newDeviceType').value.trim();
			if(!name||!type) return;
			let devices = await fetchDevices();
			devices.push({ name, type });
			await updateDevices(devices);
			document.getElementById('deviceAddedMsg').style.display = 'inline';
			setTimeout(()=>document.getElementById('deviceAddedMsg').style.display='none', 2000);
			document.getElementById('newDeviceName').value = '';
			document.getElementById('newDeviceType').value = '';
			renderDevicesSection();
		}
		document.querySelector('[data-section="devices"]').addEventListener('click', renderDevicesSection);
		document.getElementById('addDeviceBtn').onclick = addDevice;
		if(document.getElementById('section-devices').style.display==='block') renderDevicesSection();

		// --- Ø±Ø¨Ø· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ---
		async function fetchNews() {
			const res = await fetch('/api/content');
			if (!res.ok) return [];
			const data = await res.json();
			return data.news || [];
		}
		async function updateNews(newNews) {
			const res = await fetch('/api/content');
			let content = res.ok ? await res.json() : {};
			content.news = newNews;
			await fetch('/api/content', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(content)
			});
		}
		async function renderNewsSection() {
			const news = await fetchNews();
			const container = document.getElementById('newsManager');
			var newsHtml = '<table style="width:100%;border-collapse:collapse;">';
			newsHtml += '<tr style="background:#f7f7fa;"><th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th><th>Ø§Ù„Ù…Ø­ØªÙˆÙ‰</th><th>ØªØ¹Ø¯ÙŠÙ„</th></tr>';
			for(var i=0;i<news.length;i++) {
				newsHtml += '<tr>';
				newsHtml += '<td><input value="'+(news[i].title||'')+'" id="newstitle'+i+'" style="width:120px"></td>';
				newsHtml += '<td><input value="'+(news[i].body||'')+'" id="newsbody'+i+'" style="width:180px"></td>';
				newsHtml += '<td><button onclick="saveNews('+i+')" style="background:#43a047;color:#fff;border:none;padding:4px 12px;border-radius:6px;">Ø­ÙØ¸</button></td>';
				newsHtml += '</tr>';
			}
			newsHtml += '</table>';
			container.innerHTML = newsHtml;
		}
		window.saveNews = async function(idx) {
			let news = await fetchNews();
			news[idx].title = document.getElementById('newstitle'+idx).value;
			news[idx].body = document.getElementById('newsbody'+idx).value;
			await updateNews(news);
			renderNewsSection();
		}
		async function addNews() {
			const title = document.getElementById('newNewsTitle').value.trim();
			const body = document.getElementById('newNewsBody').value.trim();
			if(!title||!body) return;
			let news = await fetchNews();
			news.push({ title, body });
			await updateNews(news);
			document.getElementById('newsAddedMsg').style.display = 'inline';
			setTimeout(()=>document.getElementById('newsAddedMsg').style.display='none', 2000);
			document.getElementById('newNewsTitle').value = '';
			document.getElementById('newNewsBody').value = '';
			renderNewsSection();
		}
		document.querySelector('[data-section="news"]').addEventListener('click', renderNewsSection);
		document.getElementById('addNewsBtn').onclick = addNews;
		if(document.getElementById('section-news').style.display==='block') renderNewsSection();

		// --- Ø±Ø¨Ø· Ù‚Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ Ù…Ø¹ API (Redis) ---
		async function fetchPartners() {
			const res = await fetch('/api/content');
			if (!res.ok) return [];
			const data = await res.json();
			return data.partners || [];
		}
		async function updatePartners(newPartners) {
			const res = await fetch('/api/content');
			let content = res.ok ? await res.json() : {};
			content.partners = newPartners;
			await fetch('/api/content', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify(content)
			});
		}
		async function renderPartnersSection() {
			const partners = await fetchPartners();
			const container = document.getElementById('partnersManager');
			var html = '<table style="width:100%;border-collapse:collapse;">';
			html += '<tr style="background:#f7f7fa;"><th>Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙŠÙƒ</th><th>Ø§Ù„Ø±Ø§Ø¨Ø·</th><th>ØªØ¹Ø¯ÙŠÙ„</th></tr>';
			for(var i=0;i<partners.length;i++) {
				html += '<tr>';
				html += '<td><input value="'+(partners[i].name||'')+'" id="pname'+i+'" style="width:90px"></td>';
				html += '<td><input value="'+(partners[i].link||'')+'" id="plink'+i+'" style="width:160px"></td>';
				html += '<td><button style="background:#43a047;color:#fff;border:none;padding:4px 12px;border-radius:6px;" onclick="savePartner('+i+')">Ø­ÙØ¸</button></td>';
				html += '</tr>';
			}
			html += '</table>';
			container.innerHTML = html;
		}
		window.savePartner = async function(idx) {
			let partners = await fetchPartners();
			partners[idx].name = document.getElementById('pname'+idx).value;
			partners[idx].link = document.getElementById('plink'+idx).value;
			await updatePartners(partners);
			renderPartnersSection();
		}
		async function addPartner() {
			const name = document.getElementById('newPartnerName').value.trim();
			const link = document.getElementById('newPartnerLink').value.trim();
			if(!name||!link) return;
			let partners = await fetchPartners();
			partners.push({ name, link });
			await updatePartners(partners);
			document.getElementById('partnerAddedMsg').style.display = 'inline';
			setTimeout(()=>document.getElementById('partnerAddedMsg').style.display='none', 2000);
			document.getElementById('newPartnerName').value = '';
			document.getElementById('newPartnerLink').value = '';
			renderPartnersSection();
		}
		document.querySelector('[data-section="partners"]').addEventListener('click', renderPartnersSection);
		document.getElementById('addPartnerBtn').onclick = addPartner;
		if(document.getElementById('section-partners').style.display==='block') renderPartnersSection();

		// --- Ø±Ø¨Ø· ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ (Ø¹Ø±Ø¶ ÙÙ‚Ø·) ---
		async function fetchContact() {
			const res = await fetch('/api/content');
			if (!res.ok) return {};
			const data = await res.json();
			return data.contact || {};
		}
		async function renderContactSection() {
			const contact = await fetchContact();
			const container = document.getElementById('contactManager');
			container.innerHTML = `<div>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: <input value="${contact.email||''}" style="width:180px"></div>
				<div>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: <input value="${contact.phone||''}" style="width:140px"></div>`;
		}
		document.querySelector('[data-section="contact"]').addEventListener('click', renderContactSection);
		if(document.getElementById('section-contact').style.display==='block') renderContactSection();

		// --- ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ---
		document.querySelectorAll('.sidebar-link').forEach(link => {
			link.addEventListener('click', function() {
				document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
				this.classList.add('active');
				let section = this.getAttribute('data-section');
				document.querySelectorAll('.dashboard-section').forEach(sec => sec.style.display = 'none');
				if(section === 'logout') { /* Ù‡Ù†Ø§ ØªØ¶Ø¹ ÙƒÙˆØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ */ return; }
				document.getElementById('section-' + section).style.display = 'block';
			});
		});
		document.querySelectorAll('.dashboard-section').forEach((sec,i)=>sec.style.display = i===0?'block':'none');

		// ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ Ù„Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ÙØªÙˆØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
		if(document.getElementById('section-users').style.display==='block') renderUsersSection();
		if(document.getElementById('section-partners').style.display==='block') renderPartnersSection();
		if(document.getElementById('section-blog').style.display==='block') renderBlogSection();
		if(document.getElementById('section-plans').style.display==='block') renderPlansSection();
		if(document.getElementById('section-devices').style.display==='block') renderDevicesSection();
		if(document.getElementById('section-news').style.display==='block') renderNewsSection();
		if(document.getElementById('section-contact').style.display==='block') renderContactSection();
		if(document.getElementById('section-content').style.display==='block') renderContentSection();
		if(document.getElementById('section-partners').style.display==='block') renderPartnersSection();
		if(document.getElementById('section-stories').style.display==='block');
		if(document.getElementById('section-settings').style.display==='block');
		// Ø¹Ù†Ø¯ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙƒÙ„ Ù‚Ø³Ù… ÙÙˆØ±Ø§Ù‹
		document.querySelector('[data-section="plans"]').addEventListener('click', renderPlansSection);
		document.querySelector('[data-section="devices"]').addEventListener('click', renderDevicesSection);
		document.querySelector('[data-section="news"]').addEventListener('click', renderNewsSection);
		document.querySelector('[data-section="partners"]').addEventListener('click', renderPartnersSection);
		document.querySelector('[data-section="blog"]').addEventListener('click', renderBlogSection);
		document.querySelector('[data-section="content"]').addEventListener('click', renderContentSection);
		document.querySelector('[data-section="contact"]').addEventListener('click', renderContactSection);
		// ... ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© ...
	</script>
</body>
</html>
