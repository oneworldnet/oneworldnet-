<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>لوحة تحكم الموقع | One World Net</title>
	<link rel="stylesheet" href="style.css">
	<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<style>
		body {background:#f5f6fa;font-family:'Cairo',sans-serif;color:#181818;}
		.admin-container {max-width:1200px;margin:40px auto;padding:32px;background:#fff;border-radius:18px;box-shadow:0 4px 32px #0001;}
		.admin-header {display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;}
		.admin-header h2 {margin:0;letter-spacing:1px;}
		.admin-header .user {font-size:1.1em;color:#0af;display:flex;align-items:center;gap:8px;}
		.admin-header button {background:#0af;color:#fff;padding:10px 28px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;}
		.admin-nav {display:flex;gap:18px;margin-bottom:32px;flex-wrap:wrap;}
		.admin-nav button {background:#eee;color:#222;padding:8px 18px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;transition:0.2s;}
		.admin-nav button.active, .admin-nav button:hover {background:#0af;color:#fff;}
		.section {margin-bottom:36px;}
		.section-title {font-size:1.2em;margin-bottom:18px;color:#0af;}
		.item-list {display:flex;flex-wrap:wrap;gap:18px;}
		.item-card {background:#f9f9fb;border:1px solid #eee;border-radius:12px;padding:18px;min-width:220px;flex:1;position:relative;}
		.item-card img {max-width:100%;max-height:90px;display:block;margin-bottom:10px;border-radius:8px;}
		.item-card .actions {position:absolute;top:10px;left:10px;display:flex;gap:8px;}
		.item-card button {background:#e53935;color:#fff;border:none;padding:4px 10px;border-radius:6px;cursor:pointer;font-size:0.9em;}
		.item-card button.edit {background:#0af;}
		.add-btn {background:#43a047;color:#fff;padding:8px 18px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;}
		.modal {display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.45);z-index:9999;align-items:center;justify-content:center;}
		.modal-content {background:#fff;padding:32px 24px;border-radius:18px;max-width:350px;margin:auto;}
		.modal-content input, .modal-content textarea {width:100%;margin-bottom:12px;padding:8px 12px;border-radius:8px;border:1px solid #ccc;}
		.modal-content button {margin-top:8px;}
		.section-controls {margin-bottom:12px;}
		.section-controls button {margin-left:8px;}
		.notification {display:none;position:fixed;top:18px;left:50%;transform:translateX(-50%);background:#FFD600;color:#18120b;padding:12px 32px;border-radius:18px;font-weight:bold;z-index:9999;font-size:1.1em;box-shadow:none;min-width:220px;text-align:center;}
		.stats-box {background:#f1f8e9;border:1px solid #c5e1a5;border-radius:12px;padding:18px;min-width:180px;display:inline-block;margin:8px;}
		.marquee {background:#e3f2fd;color:#0af;padding:8px 18px;border-radius:8px;font-weight:bold;margin-bottom:18px;overflow-x:auto;white-space:nowrap;}
		.dark-mode {background:#222;color:#fff;}
		.dark-mode body, .dark-mode .admin-container, .dark-mode .item-card, .dark-mode .modal-content {
			color: #fff !important;
			background: #18120b !important;
		}
		.dark-mode .admin-nav button {background:#333;color:#fff;}
		.dark-mode .admin-nav button.active, .dark-mode .admin-nav button:hover {background:#FFD600;color:#18120b;}
		.dark-mode .stats-box {background:#263238;color:#FFD600;border-color:#FFD600;}
		.dark-mode .marquee {background:#263238;color:#FFD600;}
		/* Overlay وزر عائم للتعديل */
		.edit-overlay {
		  position: absolute;
		  top: 0; left: 0; right: 0; bottom: 0;
		<!-- نسخة من old_public/admin.html بعد التحديثات الأخيرة -->
		<!-- تم نسخ جميع التعديلات لتكون لوحة التحكم المنشورة هي نفسها الجديدة -->
		...existing code من old_public/admin.html بعد التحديثات الأخيرة...
					}
					await updateEmployees(employees);
					closeEmployeeModal();
					renderEmployees();
				}
				function editEmployee(idx) { openEmployeeModal(idx); }
				async function deleteEmployee(idx) { if(confirm('حذف الموظف؟')) { employees.splice(idx,1); await updateEmployees(employees); renderEmployees(); } }

				// --- إدارة المدونة (ديناميكي مع backend) ---
				let blogPosts = [];
				async function renderBlog() {
					blogPosts = await fetchBlog();
					const list = document.getElementById('blogList');
					list.innerHTML = '';
					blogPosts.forEach((b, i) => {
						const card = document.createElement('div');
						card.className = 'item-card';
						card.innerHTML = `
							<b>${b.title}</b><br><span style='color:#888'>${b.desc}</span>
							<div class='actions'>
								<button class='edit' onclick='editBlog(${i})'><i class="fa fa-edit"></i></button>
								<button onclick='deleteBlog(${i})'><i class="fa fa-trash"></i></button>
							</div>
							<div class='edit-overlay'>
								<button class='edit-btn' onclick='editBlog(${i});event.stopPropagation();'>تعديل</button>
								<button class='edit-btn' style='background:#e53935;color:#fff;' onclick='deleteBlog(${i});event.stopPropagation();'>حذف</button>
							</div>
						`;
						list.appendChild(card);
					});
				}
				function openBlogModal(editIdx) {
					document.getElementById('blogModalTitle').textContent = typeof editIdx==='number' ? 'تعديل تدوينة' : 'إضافة تدوينة';
					document.getElementById('blogTitleInput').value = '';
					document.getElementById('blogDescInput').value = '';
					document.getElementById('blogImageInput').value = '';
					if(typeof editIdx==='number') {
						document.getElementById('blogTitleInput').value = blogPosts[editIdx].title;
						document.getElementById('blogDescInput').value = blogPosts[editIdx].desc;
						document.getElementById('blogImageInput').value = blogPosts[editIdx].image;
						window._editingBlog = editIdx;
					} else {
						window._editingBlog = null;
					}
					document.getElementById('blogModal').style.display = 'flex';
				}
				function closeBlogModal() { document.getElementById('blogModal').style.display = 'none'; }
				async function saveBlog() {
					const title = document.getElementById('blogTitleInput').value.trim();
					const desc = document.getElementById('blogDescInput').value.trim();
					const image = document.getElementById('blogImageInput').value.trim();
					if(!title || !desc) return notify('يرجى إدخال جميع البيانات','error');
					if(window._editingBlog!==null) {
						blogPosts[window._editingBlog] = {title, desc, image};
					} else {
						blogPosts.push({title, desc, image});
					}
					await updateBlog(blogPosts);
					closeBlogModal();
					renderBlog();
				}
				function editBlog(idx) { openBlogModal(idx); }
				async function deleteBlog(idx) { if(confirm('حذف التدوينة؟')) { blogPosts.splice(idx,1); await updateBlog(blogPosts); renderBlog(); } }

				// --- إدارة المشاريع (ديناميكي مع backend) ---
					<!-- إشعارات فورية -->
					<!-- Font Awesome CDN لأيقونات مجانية وعالمية -->
					<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
					<div id="globalNotification" style="display:none;position:fixed;top:18px;left:50%;transform:translateX(-50%);background:#FFD600;color:#18120b;padding:12px 32px;border-radius:18px;font-weight:bold;z-index:9999;font-size:1.1em;box-shadow:none;min-width:220px;text-align:center;"></div>
					<!-- واجهة تغيير كلمة المرور -->
					<div id="changePassModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.55);z-index:9998;align-items:center;justify-content:center;">
						<div style="background:#18120b;padding:32px 24px;border-radius:18px;max-width:350px;margin:auto;">
							<h3 style="color:#FFD600;">تغيير كلمة المرور</h3>
							<input type="password" id="oldPass" placeholder="كلمة المرور الحالية" style="width:100%;margin-bottom:10px;">
							<input type="password" id="newPass1" placeholder="كلمة المرور الجديدة" style="width:100%;margin-bottom:10px;">
							<input type="password" id="newPass2" placeholder="تأكيد كلمة المرور الجديدة" style="width:100%;margin-bottom:18px;">
							<button onclick="changePassword()" class="main-btn">تغيير</button>
							<button onclick="closeChangePass()" class="main-btn" style="background:#e53935;color:#fff;margin-right:8px;">إلغاء</button>
							<div id="changePassMsg" style="color:#e53935;margin-top:10px;"></div>
						</div>
					</div>
					<!-- زر تغيير كلمة المرور أعلى لوحة التحكم -->
					<button id="changePassBtn" onclick="openChangePass()" style="position:fixed;top:18px;right:18px;z-index:9997;background:#FFD600;color:#18120b;border:none;border-radius:18px;padding:8px 18px;font-weight:bold;">تغيير كلمة المرور</button>
					<script>
					// إشعار فوري
					function notify(msg, type='info') {
						const n = document.getElementById('globalNotification');
						n.textContent = msg;
						n.style.background = type==='error' ? '#e53935' : (type==='success' ? '#43a047' : '#FFD600');
						n.style.color = type==='error' ? '#fff' : '#18120b';
						n.style.display = 'block';
						setTimeout(()=>{n.style.display='none';}, 2500);
					}
					// ... باقي كود old_public/admin.html بالكامل ...
					</script>
					<!-- ... بقية محتوى old_public/admin.html حتى نهاية </html> ... -->
						window._editingProject = editIdx;
