<!DOCTYPE html>
<html lang="ar">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="refresh" content="0; url=admin-strikingly.html">
	<title>تحويل للوحة التحكم الجديدة</title>
</head>
<body>
	<p style="text-align:center;margin-top:80px;font-size:1.3em;">يتم تحويلك تلقائيًا للوحة التحكم الجديدة...<br>
		<a href="admin-strikingly.html">اضغط هنا إذا لم يتم التحويل تلقائيًا</a>
	</p>
</body>
</html>
			background: #18120b !important;
		}
		.dark-mode .admin-nav button {background:#333;color:#fff;}
		.dark-mode .admin-nav button.active, .dark-mode .admin-nav button:hover {background:#FFD600;color:#18120b;}
		.dark-mode .stats-box {background:#263238;color:#FFD600;border-color:#FFD600;}
		.dark-mode .marquee {background:#263238;color:#FFD600;}
		/* Overlay وزر عائم للتعديل */
		.edit-overlay {
		  position: absolute;
		  top: 0; left: 0; right: 0; bottom: 0;
		<!-- نسخة من old_public/admin.html بعد التحديثات الأخيرة -->
		<!-- تم نسخ جميع التعديلات لتكون لوحة التحكم المنشورة هي نفسها الجديدة -->
		...existing code من old_public/admin.html بعد التحديثات الأخيرة...
					}
					await updateEmployees(employees);
					closeEmployeeModal();
					renderEmployees();
				}
				function editEmployee(idx) { openEmployeeModal(idx); }
				async function deleteEmployee(idx) { if(confirm('حذف الموظف؟')) { employees.splice(idx,1); await updateEmployees(employees); renderEmployees(); } }

				// --- إدارة المدونة (ديناميكي مع backend) ---
				let blogPosts = [];
				async function renderBlog() {
					blogPosts = await fetchBlog();
					const list = document.getElementById('blogList');
					list.innerHTML = '';
					blogPosts.forEach((b, i) => {
						const card = document.createElement('div');
						card.className = 'item-card';
						card.innerHTML = `
							<b>${b.title}</b><br><span style='color:#888'>${b.desc}</span>
							<div class='actions'>
								<button class='edit' onclick='editBlog(${i})'><i class="fa fa-edit"></i></button>
								<button onclick='deleteBlog(${i})'><i class="fa fa-trash"></i></button>
							</div>
							<div class='edit-overlay'>
								<button class='edit-btn' onclick='editBlog(${i});event.stopPropagation();'>تعديل</button>
								<button class='edit-btn' style='background:#e53935;color:#fff;' onclick='deleteBlog(${i});event.stopPropagation();'>حذف</button>
							</div>
						`;
						list.appendChild(card);
					});
				}
				function openBlogModal(editIdx) {
					document.getElementById('blogModalTitle').textContent = typeof editIdx==='number' ? 'تعديل تدوينة' : 'إضافة تدوينة';
					document.getElementById('blogTitleInput').value = '';
					document.getElementById('blogDescInput').value = '';
					document.getElementById('blogImageInput').value = '';
					if(typeof editIdx==='number') {
						document.getElementById('blogTitleInput').value = blogPosts[editIdx].title;
						document.getElementById('blogDescInput').value = blogPosts[editIdx].desc;
						document.getElementById('blogImageInput').value = blogPosts[editIdx].image;
						window._editingBlog = editIdx;
					} else {
						window._editingBlog = null;
					}
					document.getElementById('blogModal').style.display = 'flex';
				}
				function closeBlogModal() { document.getElementById('blogModal').style.display = 'none'; }
				async function saveBlog() {
					const title = document.getElementById('blogTitleInput').value.trim();
					const desc = document.getElementById('blogDescInput').value.trim();
					const image = document.getElementById('blogImageInput').value.trim();
					if(!title || !desc) return notify('يرجى إدخال جميع البيانات','error');
					if(window._editingBlog!==null) {
						blogPosts[window._editingBlog] = {title, desc, image};
					} else {
						blogPosts.push({title, desc, image});
					<!DOCTYPE html>
					<html lang="ar" dir="rtl">
					<head>
						<meta charset="UTF-8">
						<meta name="viewport" content="width=device-width, initial-scale=1.0">
						<title>لوحة تحكم شبيهة Strikingly</title>
						<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
						<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
						<style>
							body { background: #f7f7fa; font-family: 'Cairo', Arial, sans-serif; margin: 0; }
							.dashboard-wrapper { display: flex; min-height: 100vh; }
							.sidebar {
								width: 220px;
								background: #fff;
								box-shadow: 2px 0 16px #0001;
								display: flex;
								flex-direction: column;
								align-items: center;
								padding: 32px 0 0 0;
							}
							.sidebar-logo {
								font-size: 2.2em;
								font-weight: bold;
								color: #FFD600;
								margin-bottom: 32px;
							}
							.sidebar nav ul { list-style: none; padding: 0; margin: 0; width: 100%; }
							.sidebar-link {
								width: 100%;
								padding: 14px 28px 14px 18px;
								color: #333;
								font-size: 1.1em;
								display: flex;
								align-items: center;
								gap: 12px;
								cursor: pointer;
								border-right: 4px solid transparent;
								transition: background 0.2s, border-color 0.2s, color 0.2s;
							}
							.sidebar-link.active, .sidebar-link:hover {
								background: #FFD60022;
								color: #FFD600;
								border-right: 4px solid #FFD600;
							}
							.main-content {
								flex: 1;
								padding: 48px 40px 32px 40px;
								background: #f7f7fa;
								min-height: 100vh;
							}
							.dashboard-section { background: #fff; border-radius: 18px; box-shadow: 0 2px 12px #0001; padding: 32px 24px; margin-bottom: 32px; }
							h2 { color: #18120b; margin-top: 0; }
							.section-title { color: #FFD600; font-size: 1.2em; margin-top: 32px; margin-bottom: 8px; border-bottom: 1.5px solid #FFD60055; padding-bottom: 4px; }
							.note { color: #FFA726; font-size: 0.95em; margin-bottom: 18px; }
						</style>
					</head>
					<body>
						<div class="dashboard-wrapper">
							<aside class="sidebar">
								<div class="sidebar-logo">🌍</div>
								<nav>
									<ul>
										<li class="sidebar-link active" data-section="dashboard"><i class="fa fa-chart-bar"></i> لوحة الإحصائيات</li>
										<li class="sidebar-link" data-section="users"><i class="fa fa-users"></i> المستخدمون</li>
										<li class="sidebar-link" data-section="content"><i class="fa fa-file-alt"></i> المحتوى</li>
										<li class="sidebar-link" data-section="partners"><i class="fa fa-handshake"></i> الشركاء</li>
										<li class="sidebar-link" data-section="stories"><i class="fa fa-star"></i> قصص النجاح</li>
										<li class="sidebar-link" data-section="settings"><i class="fa fa-cog"></i> الإعدادات</li>
										<li class="sidebar-link" data-section="logout"><i class="fa fa-sign-out-alt"></i> خروج</li>
									</ul>
								</nav>
							</aside>
							<main class="main-content">
								<div id="section-dashboard" class="dashboard-section"> 
									<h2>لوحة الإحصائيات</h2>
									<div id="analyticsDashboard"></div>
								</div>
								<div id="section-users" class="dashboard-section" style="display:none;">
									<h2>إدارة المستخدمين</h2>
									<div id="userRolesManager"></div>
								</div>
								<div id="section-content" class="dashboard-section" style="display:none;">
									<h2>إدارة المحتوى</h2>
									<div id="aboutManager"></div>
									<div id="privacyManager"></div>
									<div id="faqManager"></div>
								</div>
								<div id="section-partners" class="dashboard-section" style="display:none;">
									<h2>شركاء الخير</h2>
									<div id="partnersManager"></div>
								</div>
								<div id="section-stories" class="dashboard-section" style="display:none;">
									<h2>قصص النجاح</h2>
									<div id="storiesManager"></div>
								</div>
								<div id="section-settings" class="dashboard-section" style="display:none;">
									<h2>الإعدادات العامة</h2>
									<div id="accessibilityManager"></div>
									<div id="donateManager"></div>
									<div id="langManager"></div>
								</div>
							</main>
						</div>
						<script>
							// تفعيل التنقل بين الأقسام
							document.querySelectorAll('.sidebar-link').forEach(link => {
								link.addEventListener('click', function() {
									document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
									this.classList.add('active');
									let section = this.getAttribute('data-section');
									document.querySelectorAll('.dashboard-section').forEach(sec => sec.style.display = 'none');
									if(section === 'logout') { /* هنا تضع كود تسجيل الخروج */ return; }
									document.getElementById('section-' + section).style.display = 'block';
								});
							});
							// إظهار القسم الأول افتراضياً
							document.querySelectorAll('.dashboard-section').forEach((sec,i)=>sec.style.display = i===0?'block':'none');
						</script>
					</body>
					</html>
					await updateBlog(blogPosts);
					closeBlogModal();
					renderBlog();
				}
				function editBlog(idx) { openBlogModal(idx); }
				async function deleteBlog(idx) { if(confirm('حذف التدوينة؟')) { blogPosts.splice(idx,1); await updateBlog(blogPosts); renderBlog(); } }

				// --- إدارة المشاريع (ديناميكي مع backend) ---
					<!-- إشعارات فورية -->
					<!-- Font Awesome CDN لأيقونات مجانية وعالمية -->
					<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
					<div id="globalNotification" style="display:none;position:fixed;top:18px;left:50%;transform:translateX(-50%);background:#FFD600;color:#18120b;padding:12px 32px;border-radius:18px;font-weight:bold;z-index:9999;font-size:1.1em;box-shadow:none;min-width:220px;text-align:center;"></div>
					<!-- واجهة تغيير كلمة المرور -->
					<div id="changePassModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.55);z-index:9998;align-items:center;justify-content:center;">
						<div style="background:#18120b;padding:32px 24px;border-radius:18px;max-width:350px;margin:auto;">
							<h3 style="color:#FFD600;">تغيير كلمة المرور</h3>
							<input type="password" id="oldPass" placeholder="كلمة المرور الحالية" style="width:100%;margin-bottom:10px;">
							<input type="password" id="newPass1" placeholder="كلمة المرور الجديدة" style="width:100%;margin-bottom:10px;">
							<input type="password" id="newPass2" placeholder="تأكيد كلمة المرور الجديدة" style="width:100%;margin-bottom:18px;">
							<button onclick="changePassword()" class="main-btn">تغيير</button>
							<button onclick="closeChangePass()" class="main-btn" style="background:#e53935;color:#fff;margin-right:8px;">إلغاء</button>
							<div id="changePassMsg" style="color:#e53935;margin-top:10px;"></div>
						</div>
					</div>
					<!-- زر تغيير كلمة المرور أعلى لوحة التحكم -->
					<button id="changePassBtn" onclick="openChangePass()" style="position:fixed;top:18px;right:18px;z-index:9997;background:#FFD600;color:#18120b;border:none;border-radius:18px;padding:8px 18px;font-weight:bold;">تغيير كلمة المرور</button>
					<script>
					// إشعار فوري
					function notify(msg, type='info') {
						const n = document.getElementById('globalNotification');
						n.textContent = msg;
						n.style.background = type==='error' ? '#e53935' : (type==='success' ? '#43a047' : '#FFD600');
						n.style.color = type==='error' ? '#fff' : '#18120b';
						n.style.display = 'block';
						setTimeout(()=>{n.style.display='none';}, 2500);
					}
					// ... باقي كود old_public/admin.html بالكامل ...
					</script>
					<!-- ... بقية محتوى old_public/admin.html حتى نهاية </html> ... -->
						window._editingProject = editIdx;
